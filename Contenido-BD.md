
# Documentación de Diseño de Base de Datos

## Introducción

Este documento describe la estructura de la base de datos para el sistema de gestión de propiedades, propietarios e imágenes. Se utiliza PostgreSQL para gestionar las tablas relacionadas con las propiedades, propietarios y las imágenes asociadas. El modelo está diseñado para ser escalable, mantener la integridad referencial y permitir un fácil acceso a los datos relacionados.

## Estructura de la Base de Datos

### 1. Tabla **Image**
La tabla `Image` almacena información sobre las imágenes asociadas a las propiedades.

```sql
CREATE TABLE public."Image" (
    "IdImage" int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
    "FileImage" text NULL,
    "Enabled" bool DEFAULT true NULL,
    "Created_at" timestamptz DEFAULT now() NOT NULL,
    CONSTRAINT "Image_IdPropertyImage_key" UNIQUE ("IdImage"),
    CONSTRAINT "Image_pkey" PRIMARY KEY ("IdImage")
);
```

**Justificación:**

*IdImage:* Identificador único de la imagen.

*FileImage:* URL o ruta del archivo de imagen.

*Enabled:* Indicador de si la imagen está habilitada.

*Created_at:* Marca temporal de creación.



### 2. Tabla **Owner**
La tabla Owner almacena la información de los propietarios de las propiedades.

```sql
CREATE TABLE public."Owner" (
    "IdOwner" int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
    "Name" varchar NULL,
    "Address" text NULL,
    "Photo" varchar NULL,
    "Created_at" timestamptz DEFAULT now() NOT NULL,
    "Birthday" date NULL,
    CONSTRAINT "Owner_IdOwner_key" UNIQUE ("IdOwner"),
    CONSTRAINT "Owner_pkey" PRIMARY KEY ("IdOwner")
);
```

**Justificación:**

IdOwner: Identificador único del propietario.

*Name:* Nombre del propietario.

*Address:* Dirección del propietario.

*Photo:* Foto del propietario.

*Created_at:* Fecha de creación del registro.

*Birthday:* Fecha de nacimiento del propietario.


###  3. **Tabla Property**
La tabla Property contiene información sobre las propiedades, como el nombre, la dirección, el precio y el propietario asociado.

```sql
CREATE TABLE public."Property" (
    "IdProperty" int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
    "Name" varchar NULL,
    "Address" varchar NULL,
    "Price" numeric NULL,
    "Created_at" timestamptz DEFAULT now() NOT NULL,
    "CodeInternal" varchar NULL,
    "Year" int2 NULL,
    "IdOwner" int8 NOT NULL,
    CONSTRAINT "Property_IdProperty_key" UNIQUE ("IdProperty")
);
```

**Justificación:**

*IdProperty:* Identificador único de la propiedad.

*Name:* Nombre de la propiedad.

*Address:* Dirección de la propiedad.

*Price:* Precio de la propiedad.

*Created_at:* Fecha de creación.

*CodeInternal:* Código interno para identificar la propiedad.

*Year:* Año de construcción.

*IdOwner:* Llave foránea que referencia a la tabla Owner.

### 4. Tabla **PropertyImage**
La tabla PropertyImage asocia las imágenes con las propiedades.
```sql
CREATE TABLE public."PropertyImage" (
    "IdPropertyImage" int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
    "IdProperty" int8 NOT NULL,
    "Created_at" timestamptz DEFAULT now() NOT NULL,
    CONSTRAINT "PropertyImage_pkey" PRIMARY KEY ("IdPropertyImage", "IdProperty")
);
```


**Justificación:**

*IdPropertyImage:* Identificador único de la relación entre propiedad e imagen.

*IdProperty:* Llave foránea que referencia la propiedad asociada.

*Created_at:* Marca temporal de creación.


###5. **Tabla PropertyTrace**
La tabla PropertyTrace registra el historial de ventas de las propiedades.

